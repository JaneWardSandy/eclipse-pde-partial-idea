<idea-plugin>
    <id>cn.varsa.idea.eclipse.pde.partial</id>
    <name>Eclipse PDE Partial</name>
    <category>JVM Frameworks</category>
    <vendor email="lyj19940214@live.com" url="https://github.com/JaneWardSandy">JaneWardSandy</vendor>
    <description><![CDATA[
        <p>Eclipse PDE partial foundation, and support for eclipse RCP(OSGI) platform and its application.</p>

        <ol>
            <li>Open <b>Preferences... | Languages & Frameworks | Eclipse Target</b>.</li>
            <li>Add the OSGI bundles that you want to work with (Eclipse root, Teamcenter root, plugins directory,
                etc.).
            </li>
            <li>Add the Eclipse PDE Partial facet (or by add framework) to any module that should be an Eclipse
                Plugins.
            </li>
        </ol>

        <p>To run eclipse application on local machine, create a new Eclipse Application Partial run configuration.</p>
        <p>To run eclipse application on remote machine, create a new Eclipse Application Remote Partial run
            configuration, and set up wishes-launcher application information. It will connect Wishes service by RMI
            naming, and remote debug by JDWP.</p>

        <p>Wishes-launcher application is available in the
            <a href="https://github.com/JaneWardSandy/eclipse-pde-partial-idea" target="_blank">Github</a></p>
        ]]></description>

    <change-notes><![CDATA[
        <p><b>Fixed:</b></p>
        <ul>
            <li>Cannot find entity for library with ID LibraryId #11 <a href="https://github.com/JaneWardSandy/eclipse-pde-partial-idea/issues/11" target="_blank">issue</a></li>
            <li>FileTooBigException on Target definition #12 <a href="https://github.com/JaneWardSandy/eclipse-pde-partial-idea/issues/12" target="_blank">issue</a></li>
            <li>Class in function parameter should be import too #15 <a href="https://github.com/JaneWardSandy/eclipse-pde-partial-idea/issues/15" target="_blank">issue</a></li>
        </ul>

        <p><b>Performance:</b></p>
        <ul>
            <li>Speed-up re-build project library</li>
        </ul>
    ]]></change-notes>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    <depends>org.jetbrains.kotlin</depends>

    <extensions defaultExtensionNs="com.intellij">
        <projectService serviceImplementation="cn.varsa.idea.pde.partial.plugin.cache.BundleManifestCacheService"/>
        <projectService serviceImplementation="cn.varsa.idea.pde.partial.plugin.config.TargetDefinitionService"/>
        <projectService serviceImplementation="cn.varsa.idea.pde.partial.plugin.config.BundleManagementService"/>

        <projectConfigurable id="cn.varsa.idea.pde.partial.plugin.config.TargetConfigurable" parentId="language"
                             instance="cn.varsa.idea.pde.partial.plugin.config.TargetConfigurable"/>

        <postStartupActivity implementation="cn.varsa.idea.pde.partial.plugin.startup.PostStartupActivity"/>

        <facetType implementation="cn.varsa.idea.pde.partial.plugin.facet.PDEFacetType"/>
        <frameworkSupport implementation="cn.varsa.idea.pde.partial.plugin.framework.TcRacFrameworkSupportProvider"/>
        <framework.detector implementation="cn.varsa.idea.pde.partial.plugin.framework.TcRacFrameworkDetector"/>

        <configurationType implementation="cn.varsa.idea.pde.partial.plugin.run.PDETargetRunConfigurationType"/>
        <configurationType implementation="cn.varsa.idea.pde.partial.plugin.run.PDETargetRemoteRunConfigurationType"/>

        <manifest.parser.provider
                implementation="cn.varsa.idea.pde.partial.plugin.manifest.lang.ManifestHeaderParserProvider"/>
        <completion.contributor language="Manifest"
                                implementationClass="cn.varsa.idea.pde.partial.plugin.manifest.completion.OsgiManifestCompletionContributor"/>

        <localInspection enabledByDefault="true" level="ERROR"
                         bundle="messages.EclipsePDEPartialBundles_locale"
                         key="inspection.unregisteredActivator"
                         groupBundle="messages.EclipsePDEPartialBundles_locale"
                         groupKey="inspection.group"
                         implementationClass="cn.varsa.idea.pde.partial.plugin.inspection.UnregisteredActivatorInspection"/>
        <localInspection enabledByDefault="true" level="ERROR"
                         bundle="messages.EclipsePDEPartialBundles_locale"
                         key="inspection.classInDefaultPackage"
                         groupBundle="messages.EclipsePDEPartialBundles_locale"
                         groupKey="inspection.group"
                         implementationClass="cn.varsa.idea.pde.partial.plugin.inspection.ClassInDefaultPackageInspection"/>
        <localInspection enabledByDefault="true" level="ERROR"
                         bundle="messages.EclipsePDEPartialBundles_locale"
                         key="inspection.packageAccessibility"
                         groupBundle="messages.EclipsePDEPartialBundles_locale"
                         groupKey="inspection.group"
                         implementationClass="cn.varsa.idea.pde.partial.plugin.inspection.PackageAccessibilityInspection"/>
        <localInspection enabledByDefault="true" level="ERROR"
                         bundle="messages.EclipsePDEPartialBundles_locale"
                         key="inspection.wrongImportPackage"
                         groupBundle="messages.EclipsePDEPartialBundles_locale"
                         groupKey="inspection.group"
                         implementationClass="cn.varsa.idea.pde.partial.plugin.inspection.WrongImportPackageInspection"/>
        <localInspection enabledByDefault="true" level="ERROR"
                         bundle="messages.EclipsePDEPartialBundles_locale"
                         key="inspection.kotlinImport"
                         groupBundle="messages.EclipsePDEPartialBundles_locale"
                         groupKey="inspection.group"
                         implementationClass="cn.varsa.idea.pde.partial.plugin.inspection.KotlinImportInspection"/>

        <implicitUsageProvider
                implementation="cn.varsa.idea.pde.partial.plugin.inspection.PluginsImplicitUsageProvider"/>
    </extensions>

    <projectListeners>
        <listener class="cn.varsa.idea.pde.partial.plugin.listener.ModuleSetupOperation"
                  topic="cn.varsa.idea.pde.partial.plugin.listener.FacetChangeListener"/>

        <listener class="cn.varsa.idea.pde.partial.plugin.listener.ProjectLibraryResetOperation"
                  topic="cn.varsa.idea.pde.partial.plugin.listener.TargetDefinitionChangeListener"/>
    </projectListeners>

    <actions>
        <action class="cn.varsa.idea.pde.partial.plugin.action.ResolveWorkspaceAction" icon="AllIcons.Actions.Refresh">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
        <action class="cn.varsa.idea.pde.partial.plugin.action.ResolveManifestAction" icon="AllIcons.Actions.Refresh">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </action>
    </actions>
</idea-plugin>
